<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lanchonete Pay - App Mobile</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            text-align: center;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .app-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }
        .download-section {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }
        .payment-return {
            background: rgba(76, 175, 80, 0.2);
            border: 2px solid #4CAF50;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .redirect-info {
            font-size: 18px;
            margin: 15px 0;
        }
        .countdown {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="app-icon">üçî</div>
        <h1>Lanchonete Pay</h1>
        
        <!-- ‚úÖ Se√ß√£o para retorno de pagamento -->
        <div id="payment-return" class="payment-return" style="display: none;">
            <h2>üéâ Pagamento Processado!</h2>
            <div class="redirect-info">
                Redirecionando para o aplicativo...
            </div>
            <div class="countdown" id="countdown">3</div>
            <div style="margin-top: 15px;">
                <button onclick="redirectToApp()" style="
                    background: #4CAF50;
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 16px;
                ">Abrir Aplicativo Agora</button>
            </div>
            <div style="margin-top: 10px; font-size: 14px;">
                <em>Se o app n√£o abrir automaticamente, clique no bot√£o acima</em>
            </div>
        </div>
        
        <!-- ‚úÖ Conte√∫do normal da landing page -->
        <div id="normal-content">
            <p>Aplicativo mobile para vendas de lanchonete com pagamentos integrados via SumUp</p>
            
            <div class="download-section">
                <h3>üöÄ App em Desenvolvimento</h3>
                <p>Nosso aplicativo m√≥vel estar√° dispon√≠vel em breve!</p>
                <p>üì± Plataformas: Android & iOS</p>
                <p>üí≥ Pagamentos: SumUp Integration</p>
            </div>
            
            <div style="margin-top: 30px;">
                <h3>‚ú® Recursos</h3>
                <ul style="text-align: left; display: inline-block;">
                    <li>Cat√°logo de produtos interativo</li>
                    <li>Carrinho de compras inteligente</li>
                    <li>Pagamentos seguros via SumUp</li>
                    <li>Interface moderna com Flutter</li>
                    <li>Gerenciamento de pedidos</li>
                </ul>
            </div>
        </div>
        
        <div style="margin-top: 20px; font-size: 14px; opacity: 0.8;">
            <p>Desenvolvido por wdcreativeapp</p>
            <p>Contato: wdcreativeapp@gmail.com</p>
        </div>
    </div>

    <script>
        // ‚úÖ JavaScript para detectar retorno de pagamento e redirecionar
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return Object.fromEntries(params);
        }
        
        function redirectToApp() {
            const params = getUrlParams();
            
            // Construir deep link com par√¢metros
            let deepLink = 'lanchonete_pay://payment/return';
            
            // Adicionar par√¢metros se existirem
            if (Object.keys(params).length > 0) {
                const queryString = new URLSearchParams(params).toString();
                deepLink += '?' + queryString;
            }
            
            console.log('Tentando abrir:', deepLink);
            
            // Tentar abrir o app
            window.location.href = deepLink;
            
            // Fallback ap√≥s 2 segundos
            setTimeout(() => {
                alert('Se o aplicativo n√£o abriu automaticamente, certifique-se de que est√° instalado no dispositivo.');
            }, 2000);
        }
        
        function startCountdown() {
            let count = 3;
            const countdownElement = document.getElementById('countdown');
            
            const timer = setInterval(() => {
                count--;
                countdownElement.textContent = count;
                
                if (count <= 0) {
                    clearInterval(timer);
                    redirectToApp();
                }
            }, 1000);
        }
        
        // ‚úÖ Verificar se √© um retorno de pagamento
        window.onload = function() {
            const params = getUrlParams();
            
            // Detectar par√¢metros que indicam retorno de pagamento
            const isPaymentReturn = params.code || 
                                  params.state || 
                                  params.checkout_id ||
                                  params.transaction_id ||
                                  window.location.search.includes('payment');
            
            if (isPaymentReturn) {
                console.log('Retorno de pagamento detectado:', params);
                
                // Mostrar se√ß√£o de retorno de pagamento
                document.getElementById('payment-return').style.display = 'block';
                document.getElementById('normal-content').style.display = 'none';
                
                // Iniciar countdown
                startCountdown();
            }
        };
        
        // ‚úÖ Log para debug
        console.log('Landing Page carregada');
        console.log('URL atual:', window.location.href);
        console.log('Par√¢metros:', getUrlParams());
    </script>
</body>
</html>